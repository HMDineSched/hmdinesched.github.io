<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Fellowship Square - Historic Mesa Schedule</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 1rem;
    background: #f9f9f9;
    color: #333;
  }
  header {
    margin-bottom: 1rem;
    text-align: center;
  }
  h1 {
    margin-bottom: 0.3rem;
  }
  .selectors {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-bottom: 1rem;
    flex-wrap: wrap;
  }
  label {
    font-weight: bold;
    font-size: 0.9rem;
  }
  select, input[type=date] {
    font-size: 1rem;
    padding: 0.2rem 0.4rem;
  }
  #quick-view {
    background: white;
    border-radius: 6px;
    padding: 0.5rem 1rem;
    box-shadow: 0 0 5px #ccc;
    max-width: 400px;
    margin: 0 auto 2rem auto;
  }
  #quick-view ul {
    list-style-type: none;
    padding-left: 0;
  }
  #quick-view li {
    padding: 0.25rem 0;
    border-bottom: 1px solid #eee;
    font-weight: 600;
  }
  #week-label {
    text-align: center;
    font-weight: bold;
    margin-bottom: 0.5rem;
    font-size: 1.1rem;
  }
  table {
    border-collapse: collapse;
    margin-bottom: 2rem;
    width: 100%;
    max-width: 960px;
    margin-left: auto;
    margin-right: auto;
    background: white;
    border-radius: 6px;
    overflow: hidden;
    box-shadow: 0 0 5px #ccc;
  }
  th, td {
    border: 1px solid #ccc;
    padding: 0.25rem 0.5rem;
    text-align: center;
    font-size: 0.85rem;
  }
  th {
    background: #eee;
  }
  th.name-col {
    text-align: left;
    background: #ddd;
    width: 130px;
  }
  caption {
    font-weight: bold;
    font-size: 1.1rem;
    padding: 0.5rem;
    background: #333;
    color: white;
  }
  /* Scroll horizontally on small screens */
  .table-container {
    overflow-x: auto;
  }
</style>
</head>
<body>
<header>
  <h1>Fellowship Square - Historic Mesa Schedule</h1>
  <div class="selectors">
    <label for="date-picker">Select Date:
      <input type="date" id="date-picker" />
    </label>
    <label for="location-selector">Select Location:
      <select id="location-selector" aria-label="Select Location">
        <option value="East">East</option>
        <option value="West/Grand">West/Grand</option>
        <option value="Oasis">Oasis</option>
      </select>
    </label>
  </div>
</header>

<section id="quick-view" aria-live="polite" aria-label="Quick view schedule for selected date and location">
  <div id="quick-view-title" style="font-weight:bold; margin-bottom:0.5rem;">Quick View — East — Wed 6/25</div>
  <ul id="quick-view-list">
    <!-- Quick view items inserted here -->
  </ul>
</section>

<section id="main-schedule">
  <div id="week-label">Week of 2025-06-23</div>

  <div class="table-container">
    <table aria-label="East Location Schedule">
      <caption>East</caption>
      <thead>
        <tr>
          <th class="name-col">Name</th>
          <th>Sun 6/23</th>
          <th>Mon 6/24</th>
          <th>Tue 6/25</th>
          <th>Wed 6/26</th>
          <th>Thu 6/27</th>
          <th>Fri 6/28</th>
          <th>Sat 6/29</th>
        </tr>
      </thead>
      <tbody>
        <tr><th>Nathan</th><td>10a–2p</td><td></td><td>6:30a–3p</td><td></td><td></td><td>9a–CL</td><td></td></tr>
        <tr><th>Brandon</th><td></td><td>2–10</td><td></td><td>6a–2p</td><td></td><td></td><td></td></tr>
        <tr><th>Melissa</th><td>10a–6p</td><td></td><td></td><td></td><td>2p–CL</td><td></td><td>10a–6p</td></tr>
        <tr><th>Marcial</th><td></td><td></td><td>11a–7p</td><td></td><td></td><td></td><td></td></tr>
      </tbody>
    </table>
  </div>

  <div class="table-container">
    <table aria-label="West/Grand Location Schedule">
      <caption>West/Grand</caption>
      <thead>
        <tr>
          <th class="name-col">Name</th>
          <th>Sun 6/23</th>
          <th>Mon 6/24</th>
          <th>Tue 6/25</th>
          <th>Wed 6/26</th>
          <th>Thu 6/27</th>
          <th>Fri 6/28</th>
          <th>Sat 6/29</th>
        </tr>
      </thead>
      <tbody>
        <tr><th>Jerry</th><td></td><td>7a–3p</td><td>10a–2p</td><td></td><td>2p–CL</td><td></td><td></td></tr>
        <tr><th>Megan</th><td>8a–4p</td><td></td><td>6a–2p</td><td></td><td></td><td>2p–CL</td><td></td></tr>
        <tr><th>Ellie</th><td></td><td></td><td>3p–CL</td><td>10a–6p</td><td></td><td></td><td>6a–2p</td></tr>
      </tbody>
    </table>
  </div>

  <div class="table-container">
    <table aria-label="Oasis Location Schedule">
      <caption>Oasis</caption>
      <thead>
        <tr>
          <th class="name-col">Name</th>
          <th>Sun 6/23</th>
          <th>Mon 6/24</th>
          <th>Tue 6/25</th>
          <th>Wed 6/26</th>
          <th>Thu 6/27</th>
          <th>Fri 6/28</th>
          <th>Sat 6/29</th>
        </tr>
      </thead>
      <tbody>
        <tr><th>December</th><td>11a–7p</td><td></td><td></td><td></td><td>10a–6p</td><td></td><td></td></tr>
        <tr><th>Eli</th><td></td><td>9a–5p</td><td></td><td></td><td></td><td></td><td>10a–6p</td></tr>
      </tbody>
    </table>
  </div>

  <div class="table-container">
    <table aria-label="TBD Location Schedule">
      <caption>tbd</caption>
      <thead>
        <tr>
          <th class="name-col">Name</th>
          <th>Sun 6/23</th>
          <th>Mon 6/24</th>
          <th>Tue 6/25</th>
          <th>Wed 6/26</th>
          <th>Thu 6/27</th>
          <th>Fri 6/28</th>
          <th>Sat 6/29</th>
        </tr>
      </thead>
      <tbody>
        <tr><th>Lisa</th><td></td><td></td><td></td><td>9a–5p</td><td></td><td></td><td></td></tr>
        <tr><th>Nico</th><td></td><td>10a–6p</td><td></td><td></td><td></td><td></td><td></td></tr>
      </tbody>
    </table>
  </div>

</section>

<script>
  // Sample data matching schedule above
  const scheduleData = [
    { name: "Nathan", date: "2025-06-23", time: "10a–2p", location: "East" },
    { name: "Nathan", date: "2025-06-25", time: "6:30a–3p", location: "East" },
    { name: "Nathan", date: "2025-06-28", time: "9a–Close", location: "East" },
    { name: "Brandon", date: "2025-06-24", time: "2–10", location: "East" },
    { name: "Brandon", date: "2025-06-26", time: "6a–2p", location: "East" },
    { name: "Melissa", date: "2025-06-23", time: "10a–6p", location: "East" },
    { name: "Melissa", date: "2025-06-27", time: "2p–Close", location: "East" },
    { name: "Melissa", date: "2025-06-29", time: "10a–6p", location: "East" },
    { name: "Marcial", date: "2025-06-25", time: "11a–7p", location: "East" },
    { name: "Jerry", date: "2025-06-24", time: "7a–3p", location: "West/Grand" },
    { name: "Jerry", date: "2025-06-25", time: "10a–2p", location: "West/Grand" },
    { name: "Jerry", date: "2025-06-27", time: "2p–Close", location: "West/Grand" },
    { name: "Megan", date: "2025-06-23", time: "8a–4p", location: "West/Grand" },
    { name: "Megan", date: "2025-06-25", time: "6a–2p", location: "West/Grand" },
    { name: "Megan", date: "2025-06-28", time: "2p–Close", location: "West/Grand" },
    { name: "Ellie", date: "2025-06-25", time: "3p–Close", location: "West/Grand" },
    { name: "Ellie", date: "2025-06-26", time: "10a–6p", location: "West/Grand" },
    { name: "Ellie", date: "2025-06-29", time: "6a–2p", location: "West/Grand" },
    { name: "December", date: "2025-06-23", time: "11a–7p", location: "Oasis" },
    { name: "December", date: "2025-06-27", time: "10a–6p", location: "Oasis" },
    { name: "Eli", date: "2025-06-24", time: "9a–5p", location: "Oasis" },
    { name: "Eli", date: "2025-06-29", time: "10a–6p", location: "Oasis" },
    { name: "Lisa", date: "2025-06-26", time: "9a–5p", location: "tbd" },
    { name: "Nico", date: "2025-06-24", time: "10a–6p", location: "tbd" }
  ];

  // Helper to get AZ today ISO string
  function getAZTodayISO() {
    const now = new Date();
    const utcTime = now.getTime() + (now.getTimezoneOffset() * 60000);
    // Arizona is UTC-7 year-round
    const azTime = new Date(utcTime - (7 * 60 * 60000));
    return azTime.toISOString().split('T')[0];
  }

  // Format date as "DayAbbr M/D"
  function formatDateMD(dateStr) {
    const d = new Date(dateStr);
    const dayNames = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
    return `${dayNames[d.getDay()]} ${d.getMonth()+1}/${d.getDate()}`;
  }

  // Calculate Monday of week containing date
  function getMonday(dateStr) {
    const d = new Date(dateStr);
    const day = d.getDay();
    const diff = (day === 0 ? -6 : 1) - day; // Sunday=0, Monday=1
    d.setDate(d.getDate() + diff);
    return d.toISOString().split('T')[0];
  }

  // Populate quick view list filtered by date and location
  function populateQuickView(dateStr, location) {
    const quickViewTitle = document.getElementById('quick-view-title');
    quickViewTitle.textContent = `Quick View — ${location} — ${formatDateMD(dateStr)}`;

    const list = document.getElementById('quick-view-list');
    list.innerHTML = '';

    const filtered = scheduleData.filter(
      s => s.date === dateStr && s.location === location
    );

    if (filtered.length === 0) {
      const li = document.createElement('li');
      li.textContent = "No shifts";
      list.appendChild(li);
      return;
    }

    filtered.sort((a,b) => a.name.localeCompare(b.name));

    filtered.forEach(shift => {
      const li = document.createElement('li');
      li.textContent = `${shift.name} — ${shift.time}`;
      list.appendChild(li);
    });
  }

  // Populate week label with Monday's date
  function updateWeekLabel(dateStr) {
    const weekLabel = document.getElementById('week-label');
    const monday = getMonday(dateStr);
    weekLabel.textContent = `Week of ${monday}`;
  }

  // Initialize selectors and event handlers
  document.addEventListener('DOMContentLoaded', () => {
    const datePicker = document.getElementById('date-picker');
    const locationSelector = document.getElementById('location-selector');

    // Set initial date picker to AZ today
    datePicker.value = getAZTodayISO();

    // Default location East
    locationSelector.value = "East";

    function updateView() {
      populateQuickView(datePicker.value, locationSelector.value);
      updateWeekLabel(datePicker.value);
    }

    datePicker.addEventListener('change', updateView);
    locationSelector.addEventListener('change', updateView);

    updateView();
  });
</script>
</body>
</html>
